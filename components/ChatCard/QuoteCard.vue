<template>
  <v-card
    class="mx-auto"
    :color="cardcontent.quoteCard && cardcontent.quoteCard.color"
    :dark="checkColor"
    max-width="400"
  >
    <v-overlay absolute :opacity="0.7" :value="overlay">
      <v-btn @click.stop.prevent="overlay = false" class="mr-2">
        Cancel
      </v-btn>
      <v-btn color="error" class="ml-2" @click.stop.prevent="deleteArticle">
        Delete!
      </v-btn>
    </v-overlay>
    <v-card-title>
      <span
        class="title font-weight-light"
        :class="!checkColor && 'black--text'"
        >{{ cardcontent.quoteCard && cardcontent.quoteCard.title }}</span
      >
    </v-card-title>

    <v-card-text
      v-if="cardcontent.quoteCard && cardcontent.quoteCard.quote"
      class="headline font-weight-bold"
      :class="!checkColor && 'black--text'"
    >
      " {{ cardcontent.quoteCard.quote }} "
    </v-card-text>
    <v-card-actions>
      <v-btn icon text :color="!checkColor ? 'black' : ''">
        <v-icon>mdi-heart-outline</v-icon>
      </v-btn>

      <v-btn icon text :color="!checkColor ? 'black' : ''">
        <v-icon>mdi-bookmark-plus-outline</v-icon>
      </v-btn>

      <v-menu offset-y>
        <template v-slot:activator="{ on }">
          <v-btn
            v-if="cardcontent._id"
            class="mx-2"
            icon
            color="secondary"
            text
            v-on="on"
          >
            <v-icon>mdi-dots-vertical</v-icon>
          </v-btn>
        </template>
        <v-list>
          <v-list-item
            v-for="(menu, index) in dropDown"
            :key="index"
            @click="onClickdropDownMenu(menu)"
          >
            <v-icon>{{ menu.icon }}</v-icon>
            <v-list-item-title>{{ menu.title }}</v-list-item-title>
          </v-list-item>
        </v-list>
      </v-menu>
      <v-card-text
        v-if="cardcontent.quoteCard && cardcontent.quoteCard.source"
        class="caption py-0 text-truncate text-right"
        :class="!checkColor && 'black--text'"
      >
        {{ cardcontent.quoteCard.source }}
      </v-card-text>
    </v-card-actions>
  </v-card>
</template>

<script>
import { lightOrDark } from '../../utilities/common'
export default {
  props: {
    cardcontent: {
      type: Object,
      default: () => {
        return {
          quoteCard: {
            title: 'Top western road trips',
            quote: '1,000 miles of wonder',
            source: 'Me',
            color: '#cccccc'
          }
        }
      }
    }
  },
  data() {
    return {
      overlay: false,
      dropDown: [
        {
          title: 'Share',
          icon: 'mdi-share-outline'
        },
        {
          title: 'Delete',
          icon: 'mdi-delete-outline'
        }
      ]
    }
  },
  computed: {
    checkColor() {
      if (
        this.cardcontent.quoteCard &&
        lightOrDark(this.cardcontent.quoteCard.color) === 'dark'
      ) {
        return true
      }
      return false
    }
  },
  methods: {
    deleteArticle() {
      this.$store.dispatch('article/deleteArticle', this.cardcontent._id)
    },
    onClickdropDownMenu(data) {
      if (data.title === 'Delete') {
        this.overlay = true
      }
    }
  }
}
</script>

<style></style>
